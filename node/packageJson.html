<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端学习笔记及思维导图 | package.json 使用指南</title>
    <meta name="description" content="总结前端学习过程中的笔记，根据自己的思维结构画出脑海中的思维导图，有助于学习前端知识。">
    <link rel="icon" href="/study-notes/logo.jpg">
    
    <link rel="preload" href="/study-notes/assets/css/14.styles.4ca9fd46.css" as="style"><link rel="preload" href="/study-notes/assets/js/app.acc3158c.js" as="script"><link rel="preload" href="/study-notes/assets/js/6.2feafa98.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/7.12a02490.js"><link rel="prefetch" href="/study-notes/assets/js/0.bc559b61.js"><link rel="prefetch" href="/study-notes/assets/js/1.7407289a.js"><link rel="prefetch" href="/study-notes/assets/js/2.9c97d2cf.js"><link rel="prefetch" href="/study-notes/assets/js/3.d1ed102f.js"><link rel="prefetch" href="/study-notes/assets/js/4.c96d1009.js"><link rel="prefetch" href="/study-notes/assets/js/5.62821893.js"><link rel="prefetch" href="/study-notes/assets/js/8.cfae3ce3.js"><link rel="prefetch" href="/study-notes/assets/js/9.3f2878a3.js"><link rel="prefetch" href="/study-notes/assets/js/10.4c35319f.js"><link rel="prefetch" href="/study-notes/assets/js/11.3cd92f78.js"><link rel="prefetch" href="/study-notes/assets/js/12.72d36b99.js"><link rel="prefetch" href="/study-notes/assets/js/13.cb40ae87.js">
    <link rel="stylesheet" href="/study-notes/assets/css/14.styles.4ca9fd46.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/study-notes/" class="home-link router-link-active"><!----><span class="site-name">
      前端学习笔记及思维导图
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.shiyanping.top/" target="_blank" rel="noopener noreferrer" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的相关</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="http://www.shiyanping.top//resume/" target="_blank" rel="noopener noreferrer" class="nav-link">简历</a></li><li class="dropdown-item"><!----><a href="http://www.shiyanping.top/fe-tool" target="_blank" rel="noopener noreferrer" class="nav-link">前端工具集</a></li></ul></div></div><a href="https://github.com/Shiyanping/study-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.shiyanping.top/" target="_blank" rel="noopener noreferrer" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的相关</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="http://www.shiyanping.top//resume/" target="_blank" rel="noopener noreferrer" class="nav-link">简历</a></li><li class="dropdown-item"><!----><a href="http://www.shiyanping.top/fe-tool" target="_blank" rel="noopener noreferrer" class="nav-link">前端工具集</a></li></ul></div></div><a href="https://github.com/Shiyanping/study-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>基础知识</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Node 知识点</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/study-notes/node/packageJson.html" class="active sidebar-link">package.json 使用指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/node/packageJson.html#_1-概述" class="sidebar-link">1. 概述</a></li><li class="sidebar-sub-header"><a href="/study-notes/node/packageJson.html#_2-scripts" class="sidebar-link">2. scripts</a></li><li class="sidebar-sub-header"><a href="/study-notes/node/packageJson.html#_3-dependencies-和-devdependencies" class="sidebar-link">3. dependencies 和 devDependencies</a></li><li class="sidebar-sub-header"><a href="/study-notes/node/packageJson.html#_4-bin" class="sidebar-link">4. bin</a></li><li class="sidebar-sub-header"><a href="/study-notes/node/packageJson.html#_5-其他" class="sidebar-link">5. 其他</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>后端知识概况</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>习题集</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="package-json-使用指南"><a href="#package-json-使用指南" aria-hidden="true" class="header-anchor">#</a> package.json 使用指南</h1><p></p><div class="table-of-contents"><ul><li><a href="#_1-概述">1. 概述</a></li><li><a href="#_2-scripts">2. scripts</a><ul><li><a href="#_2-1-scripts-命令的生命周期">2.1 scripts 命令的生命周期</a></li><li><a href="#_2-2-和-的使用">2.2 &amp;&amp; 和 &amp; 的使用</a></li><li><a href="#_2-3-多条命令一起运行">2.3 多条命令一起运行</a></li><li><a href="#_2-4-命令的退出">2.4 命令的退出</a></li></ul></li><li><a href="#_3-dependencies-和-devdependencies">3. dependencies 和 devDependencies</a><ul><li><a href="#_3-1-简介">3.1 简介</a></li><li><a href="#_3-2-安装">3.2 安装</a></li></ul></li><li><a href="#_4-bin">4. bin</a></li><li><a href="#_5-其他">5. 其他</a></li></ul></div><p></p><h2 id="_1-概述"><a href="#_1-概述" aria-hidden="true" class="header-anchor">#</a> 1. 概述</h2><p>一般的 node 项目，或者依据 node 搭建的项目，项目的根目录下都会有一个<code>package.json</code>文件，<code>package.json</code>中定义了项目所需要的各种模块和项目的配置信息。</p><p><code>package.json</code>可以手动创建，也可以使用<code>npm init</code>去自动生成。</p><p>一个完整的<code>package.json</code>一般都包含以下内容</p><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小石&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;一个node程序&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gulp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gulp uglify-js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;browser-sync&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.23.6&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>其中<code>name</code>，<code>version</code>（遵循大版本，次要版本，小版本），<code>description</code>，<code>author</code>，<code>keywords</code>，都属于<code>package.json</code>的一些基本信息，主要的功能还是依赖<code>scripts</code>，<code>dependencies</code>，<code>devDependencies</code>。</p><h2 id="_2-scripts"><a href="#_2-scripts" aria-hidden="true" class="header-anchor">#</a> 2. scripts</h2><p><code>scripts</code>主要指定了一些脚本命令的缩写，比如上面的例子中，使用<code>npm start</code>就可以运行<code>gulp</code>的脚本命令；使用<code>npm run build:js</code>就可以运行<code>gulp uglify-js</code>的脚本命令。</p><p>有些命令缩写需要写<code>run</code>修饰符，有些不需要，主要还是看命令的缩写是不是<code>npm</code>的关键字。可以在小黑窗（命令行工具）中输入<code>npm</code>查看具体<code>npm</code>的关键字。</p><p><strong>如：</strong></p><p><img src="http://pkskks1su.bkt.clouddn.com/15469149827642.jpg" alt></p><p>蓝框框起来的命令，在使用的时候都不需要写<code>run</code>，直接输入<code>npm XX</code>即可运行指定的命令。</p><p>在使用<code>scripts</code>指定脚本缩写的时候还有一些小技巧。</p><h3 id="_2-1-scripts-命令的生命周期"><a href="#_2-1-scripts-命令的生命周期" aria-hidden="true" class="header-anchor">#</a> 2.1 scripts 命令的生命周期</h3><p>在编写运行脚本命令缩写时，有生命周期的说话，在某个脚本缩写之前使用<code>pre</code>，当运行指定的脚本命令之前，会先将对应添加了 pre 的命令进行运行。</p><p><strong>如：</strong></p><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pree2e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma start&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;e2e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./e2e/*.spec.js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><p>给<code>e2e</code>命令之前添加了一条<code>pree2e</code>的命令，在执行<code>npm run e2e</code>的时候，就会先执行<code>pree2e</code>对应的命令，然后执行 &quot;e2e&quot;对应的命令。</p><p>小黑窗中执行的命令就如下图所示：</p><p><img src="http://pkskks1su.bkt.clouddn.com/15469156775730.jpg" alt></p><h3 id="_2-2-和-的使用"><a href="#_2-2-和-的使用" aria-hidden="true" class="header-anchor">#</a> 2.2 &amp;&amp; 和 &amp; 的使用</h3><p>在编写<code>scripts</code>命令时，如果多条命令想写到一个缩写中，可以使用<code>&amp;&amp;</code>和<code>&amp;</code>符号。</p><p>使用<code>&amp;&amp;</code>连接的命令属于串行执行，先执行<code>&amp;&amp;</code>之前的命令，再执行<code>&amp;&amp;</code>之后的。</p><p>使用<code>&amp;</code>连接的命令属于并行执行，互不干扰，命令同时进行。</p><p><strong>如：</strong></p><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;e2e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma start &amp;&amp; node ./e2e/*.spec.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma start &amp; node ./e2e/*.spec.js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><h3 id="_2-3-多条命令一起运行"><a href="#_2-3-多条命令一起运行" aria-hidden="true" class="header-anchor">#</a> 2.3 多条命令一起运行</h3><p>很大的项目中有的时候会有很多条<code>scripts</code>命令的缩写，有的时候需要将多条命令同时执行，可以使用上面说的<code>&amp;&amp;</code>和<code>&amp;</code>符号连接，但是当很多条命令一起执行时，使用<code>&amp;&amp;</code>和<code>&amp;</code>连接，看起来就会很冗余。</p><p>这个时候就要用到<code>npm-run-all</code>命令了。</p><p><strong>如：</strong></p><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm-run-all unit  e2e  ui  service&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;unit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma start&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pree2e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;karma start&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;e2e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./e2e/*.spec.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ui&quot;</span><span class="token operator">:</span> <span class="token string">&quot;backstop test&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;service&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./mochaRunner&quot;</span>
<span class="token punctuation">}</span>
</code></pre><p><code>npm-run-all</code>命令可以规定有些命令可以一起执行，但是这个是串行的执行，有一个命令挂了就会导致命令停止。</p><p>这个时候还可以添加一个关键字<code>--parallel</code>，表示后面的命令同时执行。</p><p><strong>如：</strong></p><pre class="language-json"><code> <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm-run-all --parallel unit  e2e  ui  service&quot;</span>
</code></pre><h3 id="_2-4-命令的退出"><a href="#_2-4-命令的退出" aria-hidden="true" class="header-anchor">#</a> 2.4 命令的退出</h3><p>在写脚本命令的时候可以使用<code>exit()</code>退出，<code>exit(0)</code>表示正常退出，<code>exit(1)</code>表示非正常退出，其实这些都是 node 中的命令，在 node 中使用更多一些。</p><pre class="language-json"><code> <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm-run-all --parallel unit  e2e  ui  service exit()&quot;</span>
</code></pre><blockquote><p>在 node 中<code>process.exit(0)</code>表示正常退出，<code>process.exit(1)</code>表示非正常退出，非正常退出可以再处理异常的时候使用。</p></blockquote><h2 id="_3-dependencies-和-devdependencies"><a href="#_3-dependencies-和-devdependencies" aria-hidden="true" class="header-anchor">#</a> 3. dependencies 和 devDependencies</h2><h3 id="_3-1-简介"><a href="#_3-1-简介" aria-hidden="true" class="header-anchor">#</a> 3.1 简介</h3><p><code>dependencies</code>和<code>devDependencies</code>中其实都是添加一些项目中需要引用的依赖包。但是两者是有区别的，<code>dependencies</code>中依赖包主要是项目运行时所需要的，在打包的时候会将依赖包打到项目中。<code>devDependencies</code>主要是项目开发时所需要的依赖模块，这个主要是开发的时候用，打包的时候不会打到项目中。</p><p><code>dependencies</code>和<code>devDependencies</code>下的依赖都有版本号。在对应的版本号上可以添加各种限定，主要有一下几种：</p><ul><li><p>指定版本：比如 1.2.2，遵循“大版本.次要版本.小版本”的格式规定，安装时只安装指定版本。</p></li><li><p>波浪号（tilde）+指定版本：比如~1.2.2，表示安装 1.2.x 的最新版本（不低于 1.2.2），但是不安装 1.3.x，也就是说安装时不改变大版本号和次要版本号。</p></li><li><p>插入号（caret）+指定版本：比如 ˆ1.2.2，表示安装 1.x.x 的最新版本（不低于 1.2.2），但是不安装 2.x.x，也就是说安装时不改变大版本号。需要注意的是，如果大版本号为 0，则插入号的行为与波浪号相同，这是因为此时处于开发阶段，即使是次要版本号变动，也可能带来程序的不兼容。</p></li><li><p>latest：安装最新版本。</p></li></ul><h3 id="_3-2-安装"><a href="#_3-2-安装" aria-hidden="true" class="header-anchor">#</a> 3.2 安装</h3><p>在安装某一个模块时，会根据使用的命令不同，指定依赖包运行的环境。</p><p><strong>如：</strong></p><pre class="language-text"><code>npm install express --save
npm install express --save-dev
</code></pre><p>使用<code>--save</code>会默认将依赖包安装到<code>dependencies</code>下，使用<code>--save-dev</code>会将依赖包安装到<code>devDependencies</code>下。</p><h2 id="_4-bin"><a href="#_4-bin" aria-hidden="true" class="header-anchor">#</a> 4. bin</h2><p>bin 项用来指定各个内部命令对应的可执行文件的位置。</p><p><strong>如：</strong></p><pre class="language-json"><code><span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;someTool&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/someTool.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre><p>有了上面的 bin 之后，我们写<code>scripts</code>命令时，就可以进行缩写了。</p><p><strong>如：</strong></p><pre class="language-js"><code>scripts<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  start<span class="token punctuation">:</span> <span class="token string">'./node_modules/someTool/someTool.js build'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 简写为</span>
scripts<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  start<span class="token punctuation">:</span> <span class="token string">'someTool build'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="_5-其他"><a href="#_5-其他" aria-hidden="true" class="header-anchor">#</a> 5. 其他</h2><p>其他的命令还有很多，上面的主要是常用的，还想详细了解的，可以参考<a href="http://javascript.ruanyifeng.com/nodejs/packagejson.html" target="_blank" rel="noopener noreferrer">JavaScript 标准参考教程</a>。</p><p>其实<code>package.json</code>只是一个配置的 json 文件，懂一些基础的就可以了，能使用最重要，开发中最重要的还是项目主体的开发，好多脚手架其实已经帮我们把这些都弄好了，我们要能看懂。</p></div><div class="content edit-link"><a href="https://github.com/Shiyanping/study-notes/edit/vuepress/docs/node/packageJson.md" target="_blank" rel="noopener noreferrer">欢迎大家来补充</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/study-notes/basis/qa.html" class="prev">
          JavaScript &amp; QA 测试
        </a></span><span class="next"><a href="/study-notes/service/View-Model.html">
          前后端分离
        </a> →
      </span></p></div></div></div></div>
    <script src="/study-notes/assets/js/6.2feafa98.js" defer></script><script src="/study-notes/assets/js/app.acc3158c.js" defer></script>
  </body>
</html>
