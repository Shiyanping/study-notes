<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端学习笔记及思维导图 | JavaScript &amp; QA 测试</title>
    <meta name="description" content="总结前端学习过程中的笔记，根据自己的思维结构画出脑海中的思维导图，有助于学习前端知识。">
    <link rel="icon" href="/study-notes/logo.jpg">
    
    <link rel="preload" href="/study-notes/assets/css/32.styles.59a50bdd.css" as="style"><link rel="preload" href="/study-notes/assets/js/app.639910cf.js" as="script"><link rel="preload" href="/study-notes/assets/js/9.d1b7d529.js" as="script"><link rel="prefetch" href="/study-notes/assets/js/15.0d512223.js"><link rel="prefetch" href="/study-notes/assets/js/0.4d1a922a.js"><link rel="prefetch" href="/study-notes/assets/js/1.c1f724d9.js"><link rel="prefetch" href="/study-notes/assets/js/2.360039a1.js"><link rel="prefetch" href="/study-notes/assets/js/3.331767d2.js"><link rel="prefetch" href="/study-notes/assets/js/4.a52c942c.js"><link rel="prefetch" href="/study-notes/assets/js/5.42f6bb2c.js"><link rel="prefetch" href="/study-notes/assets/js/6.e6ce7838.js"><link rel="prefetch" href="/study-notes/assets/js/7.daf73d73.js"><link rel="prefetch" href="/study-notes/assets/js/8.59337528.js"><link rel="prefetch" href="/study-notes/assets/js/10.4344b57f.js"><link rel="prefetch" href="/study-notes/assets/js/11.46bbe677.js"><link rel="prefetch" href="/study-notes/assets/js/12.f3c47b33.js"><link rel="prefetch" href="/study-notes/assets/js/13.3769189e.js"><link rel="prefetch" href="/study-notes/assets/js/14.733392a9.js"><link rel="prefetch" href="/study-notes/assets/js/16.3f1e1bda.js"><link rel="prefetch" href="/study-notes/assets/js/17.cceeef93.js"><link rel="prefetch" href="/study-notes/assets/js/18.92674d93.js"><link rel="prefetch" href="/study-notes/assets/js/19.e0296fb3.js"><link rel="prefetch" href="/study-notes/assets/js/20.8c3ed1af.js"><link rel="prefetch" href="/study-notes/assets/js/21.968387b2.js"><link rel="prefetch" href="/study-notes/assets/js/22.b590b691.js"><link rel="prefetch" href="/study-notes/assets/js/23.9e6cce53.js"><link rel="prefetch" href="/study-notes/assets/js/24.f4dcb39e.js"><link rel="prefetch" href="/study-notes/assets/js/25.88a7d012.js"><link rel="prefetch" href="/study-notes/assets/js/26.06506248.js"><link rel="prefetch" href="/study-notes/assets/js/27.0f709c8c.js"><link rel="prefetch" href="/study-notes/assets/js/28.99be7bbb.js"><link rel="prefetch" href="/study-notes/assets/js/29.6313a84d.js"><link rel="prefetch" href="/study-notes/assets/js/30.269d92e8.js"><link rel="prefetch" href="/study-notes/assets/js/31.6e1fec4b.js">
    <link rel="stylesheet" href="/study-notes/assets/css/32.styles.59a50bdd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/study-notes/" class="home-link router-link-active"><!----><span class="site-name">
      前端学习笔记及思维导图
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.shiyanping.top/" target="_blank" rel="noopener noreferrer" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的相关</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="http://www.shiyanping.top//resume/" target="_blank" rel="noopener noreferrer" class="nav-link">简历</a></li><li class="dropdown-item"><!----><a href="http://www.shiyanping.top/fe-tool" target="_blank" rel="noopener noreferrer" class="nav-link">前端工具集</a></li></ul></div></div><a href="https://github.com/Shiyanping/study-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.shiyanping.top/" target="_blank" rel="noopener noreferrer" class="nav-link">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的相关</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="http://www.shiyanping.top//resume/" target="_blank" rel="noopener noreferrer" class="nav-link">简历</a></li><li class="dropdown-item"><!----><a href="http://www.shiyanping.top/fe-tool" target="_blank" rel="noopener noreferrer" class="nav-link">前端工具集</a></li></ul></div></div><a href="https://github.com/Shiyanping/study-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>你不知道的 JavaScript</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CSS 的世界</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>框架全解析</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>后端知识概况</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Node 半知半解</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>世界上最好的语言 PHP</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络相关</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>其他补充知识</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/study-notes/others/HTML.html" class="sidebar-link">你不知道的 HTML</a></li><li><a href="/study-notes/others/QA.html" class="active sidebar-link">JavaScript &amp; QA 测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-notes/others/QA.html#_1-单元测试" class="sidebar-link">1. 单元测试</a></li><li class="sidebar-sub-header"><a href="/study-notes/others/QA.html#_2-性能测试" class="sidebar-link">2. 性能测试</a></li><li class="sidebar-sub-header"><a href="/study-notes/others/QA.html#_3-安全测试" class="sidebar-link">3. 安全测试</a></li><li class="sidebar-sub-header"><a href="/study-notes/others/QA.html#_4-功能测试" class="sidebar-link">4. 功能测试</a></li></ul></li><li><a href="/study-notes/others/function-program.html" class="sidebar-link">函数式编程</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>习题集</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="javascript-qa-测试"><a href="#javascript-qa-测试" aria-hidden="true" class="header-anchor">#</a> JavaScript &amp; QA 测试</h1><p><img src="/study-notes/assets/img/QA.9868de8d.png" alt></p><p>测试方法有很多种，测试方面也有很多，主要的测试包括：单元测试，性能测试，功能测试，安全测试。</p><p>当前测试工程师分为：黑盒和白盒。</p><p>测试主要还是让代码在线上运行更加健壮，当代码在线上跑的时候让开发 QA 放心。</p><h2 id="_1-单元测试"><a href="#_1-单元测试" aria-hidden="true" class="header-anchor">#</a> 1. 单元测试</h2><h3 id="_1-1-单元测试原理"><a href="#_1-1-单元测试原理" aria-hidden="true" class="header-anchor">#</a> 1.1 单元测试原理</h3><p>对自己输出的东西进行测试，一般不需要 QA 工程师接入，程序员通过自己的测试脚本去完成单元测试，让自己输出的东西值得别人信赖。</p><p>目的：
能让开发者明确知道代码的结果。</p><p>原则：
单一职责，接口抽象，层次分离。（能抽离的抽离，管好自己的代码。每一个函数尽量少的代码，从一个个小功能开始抽离，将不同的小功能分离成不同的函数。）</p><p>断言库：
保证最小单元是否正常运行的检测方法。</p><p>测试风格：
测试驱动开发（TDD），行为驱动开发（BDD），均是敏捷开发的方法论。</p><blockquote><p>敏捷开发：简单的来说其实就是 todo，doing，done</p></blockquote><p>TDD：关注所有的功能是否都实现，每个功能必须都有测试用例。
断言库：<code>better-assert</code></p><p>BDD：关注整体行为是否符合整体预期，编写的每一行代码都有目的的提供一个完整的测试用例。
断言库：<code>should.js</code>，<code>expect.js</code>，<code>Jasmine</code>（14.1Kstar）</p><p>TBB 和 BDD 结合的双模断言库：<code>chai.js</code></p><p><strong>断言库的生命周期：</strong></p><p>before -&gt; beforeEach -&gt; 代码块 （it）-&gt; after -&gt; afterEach</p><h3 id="_1-2-单元测试工具"><a href="#_1-2-单元测试工具" aria-hidden="true" class="header-anchor">#</a> 1.2 单元测试工具</h3><h4 id="_1-2-1-karma"><a href="#_1-2-1-karma" aria-hidden="true" class="header-anchor">#</a> 1.2.1 <a href="https://karma-runner.github.io/3.0/intro/installation.html" target="_blank" rel="noopener noreferrer">karma</a></h4><p>karma 是一个单元测试执行过程管理工具，主要是对 JS 进行单元测试，用到的断言库是<code>jasmine</code>，运行环境有很多选择，可以基于<code>chrome</code>或者无头浏览器<code>phantomjs</code>去做 js 自动化单元测试，运行环境可以在初始化<code>karma</code>的时候选择。</p><ul><li>安装</li></ul><p>安装<code>karma</code>可以直接去<a href="https://karma-runner.github.io/3.0/intro/installation.html" target="_blank" rel="noopener noreferrer">karma 官网</a>，按照教程安装即可。</p><p>官网指示的教程是安装<code>chrome</code>去运行测试脚本，当我们使用<code>phantomjs</code>用作运行环境时，必须要安装<code>phantomjs</code>指定的依赖包。</p><pre class="language-text"><code>npm install phantom karma-phantomjs-launcher --save-dev
</code></pre><ul><li>初始化</li></ul><p>初始化：<code>karma init</code>，执行初始化命令之后，会有一系列的提示选择，根据自己的喜好，选择即可，上面说的选择操作系统，就在其中。</p><p>在最后都选择完之后会生成一个<code>karma.conf.js</code>，里面是<code>karma</code>的一些配置，包括需要测试的文件<code>files</code>下，还有生成测试报表的目录<code>coverageReporter</code>（需要）。</p><ul><li>编写测试脚本</li></ul><p>初始化完成之后，我们就要编写测试脚本了，要在相应的目录下编写<code>*.spec.js</code>结尾的文件，一般的脚本命令都是以<code>*.spec.js</code>结尾。</p><p><strong>例：</strong></p><p>我们的开发代码：</p><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>我们的测试脚本：</p><pre class="language-js"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'测试基本函数的API'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'+1函数应用'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'测试字符串切割'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>我们如果使用了<code>phantomjs</code>用作运行环境的话，可能会因为<code>phantomjs</code>版本太老，不支持 ES6 语法，所以我们尽量使用 ES5 去编写测试脚本。</p></div><ul><li>运行脚本</li></ul><p>在命令行中使用<code>karma start</code>即可跑 karma 的测试脚本。</p><ul><li>生成测试报表</li></ul><p>我们测试完成之后可以通过生成报表去观察测试的情况，这个时候就要使用到 <a href="https://www.npmjs.com/package/karma-coverage" target="_blank" rel="noopener noreferrer">karma-coverage</a> 了，按照<code>npm</code>上的指导进行安装即可。</p><h4 id="_1-2-2-selenium-webdriver"><a href="#_1-2-2-selenium-webdriver" aria-hidden="true" class="header-anchor">#</a> 1.2.2 selenium-webdriver</h4><p>主要用作页面测试，需要安装 <a href="https://www.npmjs.com/package/selenium-webdriver" target="_blank" rel="noopener noreferrer">selenium-webdriver</a> 依赖包。</p><ul><li>安装</li></ul><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> selenium-webdriver
</code></pre><p>在安装了<code>selenium-webdriver</code>依赖包之后，还需要下载对应浏览器的依赖程序，如果要使用<code>Chrome</code>测试，那就下载<code>Chrome</code>的包，如果使用<code>Firefox</code>测试，就下载<code>Firefox</code>的包。如下图：</p><p><img src="http://cdn.jinyueyue.cn/15470193483134.jpg" alt></p><ul><li>编写测试代码</li></ul><p>npm 对应的<code>selenium-webdriver</code>依赖包中，有简单的测试脚本，我们手动创建一个<code>*.spec.js</code>，把测试脚本的代码 copy 进去。</p><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Builder<span class="token punctuation">,</span> By<span class="token punctuation">,</span> Key<span class="token punctuation">,</span> until <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'selenium-webdriver'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> driver <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forBrowser</span><span class="token punctuation">(</span><span class="token string">'firefox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> driver<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> driver<span class="token punctuation">.</span><span class="token function">findElement</span><span class="token punctuation">(</span>By<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">'kw'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendKeys</span><span class="token punctuation">(</span><span class="token string">'石燕平'</span><span class="token punctuation">,</span> Key<span class="token punctuation">.</span><span class="token constant">RETURN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> driver<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>until<span class="token punctuation">.</span><span class="token function">titleIs</span><span class="token punctuation">(</span><span class="token string">'石燕平_百度搜索'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> driver<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><ul><li>运行脚本</li></ul><pre class="language-bash"><code>node XX/*.spec.js
</code></pre><p>其中 XX 就是<code>e2e</code>测试脚本对应的文件夹目录。</p><h4 id="_1-2-3-rize-js"><a href="#_1-2-3-rize-js" aria-hidden="true" class="header-anchor">#</a> 1.2.3 <a href="https://rize.js.org/zh-CN/" target="_blank" rel="noopener noreferrer">rize.js</a></h4><p>rize 的官网有详细的例子和说明，可以上官网具体看一下例子，很容易懂，而且操作起来也很简单。</p><ul><li>安装</li></ul><pre class="language-bash"><code>yarn add --dev puppeteer rize
</code></pre><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>puppeteer 比较难装，一定要翻墙之后装，要不然会出问题。</p></div><ul><li>编写测试脚本</li></ul><pre class="language-js"><code><span class="token keyword">const</span> Rize <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rize</span><span class="token punctuation">(</span><span class="token punctuation">{</span> headless<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rize
  <span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">'https://github.com/'</span><span class="token punctuation">)</span> <span class="token comment">// 访问github</span>
  <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">'input.header-search-input'</span><span class="token punctuation">,</span> <span class="token string">'node'</span><span class="token punctuation">)</span> <span class="token comment">// 在class名为header-search-input的input中输入“node”</span>
  <span class="token punctuation">.</span><span class="token function">press</span><span class="token punctuation">(</span><span class="token string">'Enter'</span><span class="token punctuation">)</span> <span class="token comment">// 回车</span>
  <span class="token punctuation">.</span><span class="token function">waitForNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 等待页面跳转</span>
  <span class="token comment">// .assertSee('Node.js')</span>
  <span class="token punctuation">.</span><span class="token function">saveScreenshot</span><span class="token punctuation">(</span><span class="token string">'searching-node.png'</span><span class="token punctuation">)</span> <span class="token comment">// 保存截图</span>
  <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 别忘了调用 `end` 方法来退出浏览器！</span>
</code></pre><ul><li>运行脚本</li></ul><pre class="language-bash"><code>node XX/*.spec.js
</code></pre><h4 id="_1-2-4-其他"><a href="#_1-2-4-其他" aria-hidden="true" class="header-anchor">#</a> 1.2.4 其他</h4><p>其他的单元测试框架还有很多，比如：nightwatch.js，<a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">jest.js</a>（react 使用比较多），<a href="https://github.com/alibaba/f2etest" target="_blank" rel="noopener noreferrer">f2etest</a>。</p><h3 id="_1-3-ui-走查"><a href="#_1-3-ui-走查" aria-hidden="true" class="header-anchor">#</a> 1.3 UI 走查</h3><h4 id="_1-3-1-backstop"><a href="#_1-3-1-backstop" aria-hidden="true" class="header-anchor">#</a> 1.3.1 <a href="https://www.npmjs.com/package/backstopjs" target="_blank" rel="noopener noreferrer">backstop</a></h4><ul><li>安装</li></ul><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g backstopjs
</code></pre><ul><li>初始化</li></ul><pre class="language-bash"><code>backstop init
</code></pre><p>初始化之后会生成一些<code>backstop</code>相关的文件，修改<code>backstop.json</code>，进行配置。</p><p>将 UI 的图片放到<code>backstop_data/bitmaps_reference</code>文件夹下，图片名称的话，可以先跑一下<code>backstop test</code>，会有一个报错，就是报没有指定的图片，将图片名字 copy 一下，在<code>backstop_data/bitmaps_reference</code>下创建一个即可。</p><p>将自己写的网页链接配置到<code>scenarios</code> -&gt; <code>url</code>中。</p><pre class="language-json"><code><span class="token property">&quot;scenarios&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BackstopJS Homepage&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;cookiePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;backstop_data/engine_scripts/cookies.json&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://map.qq.com/m/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
</code></pre><ul><li>测试</li></ul><pre class="language-bash"><code>backstop <span class="token function">test</span>
</code></pre><p>会自动输出一个报表，放到<code>backstop_data/html_report</code>下，里面有自己写的网页和 UI 图不同的地方。</p><h4 id="_1-3-2-phantomcss"><a href="#_1-3-2-phantomcss" aria-hidden="true" class="header-anchor">#</a> 1.3.2 <a href="https://github.com/HuddleEng/PhantomCSS" target="_blank" rel="noopener noreferrer">phantomCSS</a></h4><p>phantomJS 的兄弟，专门用作 UI 走查。</p><h3 id="_1-4-测试后端接口"><a href="#_1-4-测试后端接口" aria-hidden="true" class="header-anchor">#</a> 1.4 测试后端接口</h3><p><a href="https://www.npmjs.com/package/mocha" target="_blank" rel="noopener noreferrer">mocha</a> ，主要用于测试后端接口返回的数据结构是否正常。</p><ul><li>安装</li></ul><pre class="language-text"><code>npm install mocha --save-dev
</code></pre><ul><li>编写测试脚本</li></ul><p>因为我们是测试后端的接口，所以测试的前提就是一定要有后端的接口，什么接口不限制，只要是 http 接口就行。</p><pre class="language-js"><code><span class="token comment">// router.spec.js</span>
<span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'node接口测试'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'test接口测试'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/test'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'错误'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><code>describe</code>中可以编写很多个 it，需要测试多少接口就编写多少个 it 即可。</p><ul><li>运行脚本</li></ul><pre class="language-bash"><code>mocha router.spec.js
</code></pre><p>这里运行脚本之后，会在小黑框中运行，后续会有返回结果，如果没有报错，就证明接口没问题。如果想生成报表的话，我们就需要借助其他的依赖包了。</p><ul><li>生成报表</li></ul><p>想要生成报表，我们就需要借助 <a href="https://www.npmjs.com/package/mochawesome" target="_blank" rel="noopener noreferrer">mochawesome</a> 依赖包了，使用方法可以参考<code>npm</code>。创建一个 js，编写下面生成报表的代码。</p><p><strong>例：</strong></p><pre class="language-js"><code><span class="token keyword">const</span> Mocha <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mocha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mocha <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mocha</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  reporter<span class="token punctuation">:</span> <span class="token string">'mochawesome'</span><span class="token punctuation">,</span>
  reporterOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    reportDir<span class="token punctuation">:</span> <span class="token string">'./docs/mochawesome-report'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mocha<span class="token punctuation">.</span><span class="token function">addFile</span><span class="token punctuation">(</span><span class="token string">'./service/router.spec.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mocha<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>errLength <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>errLength <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`出错长度：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>errLength<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>当创建好上面的 js 之后，就不能跑<code>router.spec.js</code>了，而是需要跑创建的这个 js，<code>node XX.js</code>。不管测试通过不通过，都会讲报表生成到<code>reportDir</code>指定的目录下。</p><h2 id="_2-性能测试"><a href="#_2-性能测试" aria-hidden="true" class="header-anchor">#</a> 2. 性能测试</h2><p>一般也是工程师自己去测试，QA 工程师一般不会介入。尤其是在写<code>node.js</code>时，性能测试就很重要了。</p><h2 id="_3-安全测试"><a href="#_3-安全测试" aria-hidden="true" class="header-anchor">#</a> 3. 安全测试</h2><p>网页上有<code>CSRF</code>，<code>XSS</code>攻击，后端还有<code>SQL</code>攻击。</p><h2 id="_4-功能测试"><a href="#_4-功能测试" aria-hidden="true" class="header-anchor">#</a> 4. 功能测试</h2><p>一个功能搞定之后，要有测试的 case，也叫测试用例，根据测试用例完成功能测试。</p></div><div class="content edit-link"><a href="https://github.com/Shiyanping/study-notes/edit/vuepress/docs/others/QA.md" target="_blank" rel="noopener noreferrer">欢迎大家来补充</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/study-notes/others/HTML.html" class="prev">
          你不知道的 HTML
        </a></span><span class="next"><a href="/study-notes/others/function-program.html">
          函数式编程
        </a> →
      </span></p></div></div></div></div>
    <script src="/study-notes/assets/js/9.d1b7d529.js" defer></script><script src="/study-notes/assets/js/app.639910cf.js" defer></script>
  </body>
</html>
